<!DOCTYPE html>
<html>
	<head>
		<title>THREECS | Demo</title>
		<script type="importmap">
			{
				"imports": {
					"three":           "https://unpkg.com/three@0.157.0/build/three.module.min.js",
					"three/addons/":   "https://unpkg.com/three@0.157.0/examples/jsm/",
					"three-ecs":       "../index.js",
					"three-ecs/":      "../"
				}
			}
		</script>
		<script type="module">
			import { 
				World, Entity, Component, System, 
				Camera, Geometry, Material, Mesh,
				componentRegistry, systemRegistry
			} from "three-ecs";

			class NoisySystem extends System {
				static get autoregister(){
					return [
						"noisy-component"
					]
				}// get autoregister

				connected(entity){
					super.connected(entity);

					console.log("Noisy system added!");
				}// connected
			}// NoisySystem

			systemRegistry.set("noisy-system", NoisySystem);

			const world = window.WORLD = new World([
				// create a red box to the left
				new Entity(
					[], 
					[],
					[
						new Geometry(),
						new Material({ color: 0xff0000 }),
						new Mesh()
					],
					{
						position: {
							x: -2
						}
					}
				),
				// create a blue box to the right
				new Entity(
					[], 
					[],
					[
						new Geometry(),
						new Material({ color: 0x0000ff }),
						new Mesh()
					], 
					{
						position: {
							x: 2
						}
					}
				),
				new Entity(
					[ ],
					[],
					[ new Camera() ],
					{
						position: {
							y: 1,
							z: 5
						}
					}
				)
			], [
				new NoisySystem()
			]);
			
			document.body.appendChild(world.canvas);

			world.connected();
			world.play();
		</script>
		<style>
			* {
				box-sizing: border-box;;
			}
			html, body, canvas {
				height: 100%;
				width: 100%;
			}
			body {
				margin: 0;
			}
		</style>
	</head>
	<body>

	</body>
</html>
